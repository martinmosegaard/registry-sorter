plugins {
  id 'application'
  id 'codenarc'
  id 'groovy'

  id 'com.github.ben-manes.versions' version '0.14.0'
  id 'com.github.kt3k.coveralls' version '2.8.1'
  id 'net.saliman.cobertura' version '2.4.0'
}

repositories {
  jcenter()
}

dependencies {
  compile 'ch.qos.logback:logback-classic:1.2.1'
  compile 'org.codehaus.groovy:groovy-all:2.4.9'

  testCompile 'org.spockframework:spock-core:1.1-groovy-2.4-rc-3'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

mainClassName = 'dk.martinmosegaard.registrysorter.Main'

jar {
  version = '1.0.0'
  manifest {
    attributes 'Main-Class': mainClassName
  }
}

cobertura {
  coverageExcludes = [
    '.*dk.martinmosegaard.registrysorter.view.*',
    '.*dk.martinmosegaard.registrysorter.Main'
  ]
  coverageFormats = [ 'html', 'xml' ] // coveralls depends on xml report
  coverageSourceDirs = sourceSets.main.groovy.srcDirs
}

codenarc {
  config = project.resources.text.fromFile('config/codenarc/codenarc.groovy')
}

dependencyUpdates {
  revision = 'release'
}
